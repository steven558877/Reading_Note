# 使用變數的一般事項
- 對隱式宣告的程式語言的變數可以使用遵循某種命名規則去達到避免混淆，明確地 知道這個變數的型態是什麼
##  變數初始化原則
- 宣告每個變數時就給他初始值
- 在靠近變數第一次使用的地方給他初始值
 - 就近原則
- 理想的情況下再靠近第一次使用變數的位置宣告和定義該變數
- 在可能的情況下使用const
- 在類別的建構函式裡初始化該類別的資料成員
- 確認是否需要重新初始化
	- 如果確定的話那要確保初始化位於那段重複執行的程式碼內部
- 一次性初始化具名常數
- 使用編譯器設定來自動初始化所有這些變數
	- 如果編譯器支援的化盡量打開，確保有用文字紀錄，避免換平台後出錯
- 利用編譯器的警告訊息
- 檢查輸入參數的合法性
- 使用記憶體存區檢查工具來檢查錯誤的指標
- 在程式一開始時初始化工作記憶體
    - 有幾種方式
	    - 使用記憶體填充工具， 在程式執行時填充 預料的值。
		    - 對於 x86 的機器可以填充 0xCC，代表中斷點中斷的機器碼
	    - 如果使用 記憶體 填充工具 ，偶爾可以改變一下填充記憶體的值
	    - 可以讓程式在啟動時初始化工作記憶體， 上述兩點的作用是要讓程式暴露缺陷， 而這種方式可以隱藏缺陷， 透過每次都將工作記憶體賦予相同的值就能保證程式不會因為記憶體的初始值的隨機性而受到影響
 ##  作用範圍
 ### 使變數參考 局部化
 * 書中提到一個名詞，攻擊窗口，意思是變數被不當修改或是被忘記。
 * 書中提到一個名詞跨度， 指的是變數在被使用時前一次跟這一次使用中間需隔多少行程式碼， 所有變數加總的平均直誇度越小越好，可以讓讀者只需關注一部分程式碼，提高程式的可讀性
### 盡可能縮短變數的存活時間
 * 存活時間是指第一次到最後一次使用的距離 
 * 與跨度相同 保持較低的存活時間也是良好的習慣
 * 縮小跨度跟存活時間都能減小攻擊窗口。
 * 縮小變數存活時間的好處是你能對程式碼有更準確的認知，例如一個在第10行被賦值的變數到第45行才被使用，會有種中間這幾行也會使用他的錯覺，所以最好是在第44行賦值，在第45行使用，就不會有隱藏的涵義出現
 * 這個對可讀性也有提升，閱讀者在同一時間只需要考慮較少行數的程式碼，會更容易閱讀
 * 也能夠容易的將程式碼拆成小函數
 ### 減小作用範圍則一般原則
 - 在迴圈開始前再去初始化該迴圈使用的變數而不是在該迴圈所屬的子程式開始處初始化這些變數
 - 直到變數即將被使用時再給其賦值
 - 把相關述句組擷取成單獨的子程式
     把相關的一組述句拆分成單獨得、更小的子程式可以進而縮小變數的作用範圍
 - 開始時採用最嚴格的可見性然後根據需要擴充變數的作用範圍
	 - 先將變數的可見性縮到最小，有需要時才擴充範圍
### 有關縮小變數作用範圍的說明
這個問題有兩個關鍵的要素，一個是方便性， 另一個是智力上的可管理性。 用全域變數雖然可以提高方便性但是在管理性上卻很差，並且會更容易忘記某項資訊而犯錯。
因此你應該把每個變數的定義成只需要看到他最小範圍的程式碼區段可見
如果你無法把變數的作用範圍限定在 對該變數承擔最主要的負責的那個類別裡面， 那就建立一些存取子程式來讓他們類別共享改變數的資料
## 持續性
- 變數生命週期的另外一種說法

* 有時候你會在一些已經過了生命週期的變數裡面取得他的值， 雖然幾乎會有編譯器的錯誤訊息提示你無法使用， 但是偶爾會有編譯器 無法發現的錯誤， 可以採取以下措施
	* 在程式中加入除錯程式碼或是斷言來檢查那些關鍵變數的合理取值
	* 拋棄變數時給予一個不合理的數值
	* 養成在使用所有資料前宣告和初始化的習慣
## 綁定時間
* 變數綁定成某個值的時間愈晚，就有愈高的彈性
	* 例如 `a = 0xFF` 的彈性就比 `a = foo()` 差
* 彈性跟複雜度成反比，愈高彈性的程式會愈複雜
## 為變數指定單一用途
避免tmp變數，就算使用也不要讓他多用途
不要讓變數在特定條件下有不同意義
確保有使用那些宣告過的變數
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTY5Njk1ODY4NSwxNzI1MTc1NDcwLDE3OT
czMjk0MzYsOTQ2NjkzODQ5LDE0MjA5OTAwODAsLTEwMzMxNjU0
NTQsLTE3NjkyNjExMywtNDM4OTA2Mzc1LC04MjM0NDQ5NiwtNz
Q5ODA0MTQ0LC03NTAxMTg0ODYsLTY4OTQ3MjYyMSwxNzgwNzkw
MzIxLC0xODY3MjY0NjUxLDE4ODM1MzgzNDcsMjA4NjM3ODk4NC
wyMDMyNjYwMjIsMTkwNzA0Mjg2NiwtOTkxNTA1MzUzLC0xMzkz
ODE4ODhdfQ==
-->