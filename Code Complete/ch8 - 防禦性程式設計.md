# 防禦性程式設計
子程式不應因傳入非法參數而被破壞，在開發時也不要引入錯誤，例如開始之前先寫虛擬碼、TDD等等技術避免引入錯誤
## 保護程式免遭非法輸入資料破壞
1. 檢查所有外來的資料
2. 檢查其他子程式輸入的資料
3. 決定如何處裡錯誤的輸入資料

## 斷言(assertion)
做程式自我測試時用，例如某個函數帶入某參數應該要回傳某個值，否則就是錯誤，就要用斷言，斷言程式有錯。通常只有在開發中會將斷言的程式碼寫入產品程式碼中，發布後就會清除。

### 使用斷言的指引
1. 錯誤處理程式是用來接可能會發生的錯誤，而斷言是用來處理絕不該發生的事。錯誤處理通常是來防止有害的輸入，而斷言是用來檢查程式的BUG。
2. 避免把需要執行的程式放入斷言中，因為如果後來關閉斷言功能後可能會被編譯器最佳化掉，因此最好將程式拉出來執行再將結果丟給斷言判斷。
3. 用斷言來註解並驗證前置條件及後置條件。例如以下程式:
```C++
int fun(int K)
```
<!--stackedit_data:
eyJoaXN0b3J5IjpbMTY1NzczNzIyNiwtNTkzNDY2NDcsMTE4Mj
cwMTEzOSwxMDIyMjM2NjUwLDIwNjU0NTEwOF19
-->