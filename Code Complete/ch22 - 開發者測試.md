# 開發者測試
* Unit test: 一個類別、子程式、小程式
* Component test: 相比於上條，規模可能是較大的類別、套件、程式
* Integration test: 兩個或更多類別、套件、元件，最好在開發時有兩個以上的類別時就開始做，並做到系統開發完成
* Regression test: 重複執行先前跑過的測試，找出沒找到的問題
* System test: 最終設定下(軟硬體)去測試整個軟體，包含測試安全性、效能、資源消耗、時序等無法在低層次測試體現的問題。
## 開發者測試的推薦方法
系統化的開發方法可以提高發現錯誤的能力及讓花費最少，要做到以下幾點:
* 對每一項需求進行測試，以確保需求都已經被實作。在需求階段就計畫好測試案例，或是早點開始，最好在開始寫待測單元前。
* 注意對需求裡面常見的疏漏進行測試
* 安全級別、資料儲存、安裝過程及系統可靠性都是好的測試素材。
* 對每一個相關的設計關注點進行測試，確保設計已被實現，並在計畫時就設計好測試案例。
* 用基礎測試來擴充對需求和設計的詳細測試案例
* 增加資料流測試(章節後面詳述)。
* 至少應該要測試到每一行程式碼
* 用核對表紀錄本專案所發生的錯誤，及過去專案中發生錯誤的類型。

## 測試先行還是測試後行
從書中引用的圖中顯示，愈早發現錯誤所需要付出的成本愈低，這是應該要測試先行的原因之一
* 先寫及後寫測試只差再順序，並不會多多少effort
* 先寫測試可以提早發現錯誤
* 先寫測試可以強迫你思考需求及設計，這會催生更高品質的程式碼
* 先寫測試可以提早暴露需求的問題，糟糕的需求很難寫出測試
## 開發者測試的侷限性
* 開發者傾向「乾淨測試」
	* 指的是檢查程式法會正常運作的測試，正確的測試中正常以及錯誤的比例會是1:5。
* 程式設計師會對coverage過度樂觀

## 測試技巧錦囊
* 對所有可能發生的狀況去做測試是不可行的，例如一個5個字元的字串，可能的結果單純以英文文字來看就有26^5種，全測是不切實際的。
* 專注在於尋找會讓測試結果不同的案例，而非找一堆相同結果的，下面會說如何找到這種案例。
### 結構化的基礎測試
* 核心概念是對程式中的每條述句至少測試一次。
* 如果是if/while述句，測試可以完全測試所有狀況，簡單的方法是算一算這段程式有多少條狀況，列出來後去測試每條狀況，據此產生出最少數量的測試案例。
* 計算測試案例數量的方法
	* 從第一行開始，計算數量，從1開始。
	* 遇到邏輯述句，像是if/while/for/and/or等等，數量加1
	* 遇到每個case時數量加1，case沒有default時再加1
* 例如下面的程式:
```C++
Statment1; // 從1開始, count: 1
Statment2; // count: 1
if (x < 0) // count: 2
{
	Statment3; // count: 2
}
```
* 遇到if時count要加1的原因是你需要兩段程式去測試這兩種狀況:
	* x < 0
	* x >= 0
* 所以在這段程式最少數量的測試案例就是2個
* 如果程式擴大，裏頭的邏輯述句變多時，測試案例會急遽增加，因此應保持子程式或邏輯述句簡短以便測試。
* 這種測試能確保所有程式碼皆可被執行，但是他不能說明資料變化的情況。
### 資料流測試
* 資料的狀態有以下幾種:
	* 已定義
	* 已使用
	* 已銷毀
* 控制流的狀態:
	* 已進入:控制流已進入某個子程式
	* 已結束 控制流離開子程式
* 好的開發測試案例的方法流程是:
	* 首先，先完成結構化的基礎測試，即使沒有測試所以已定義-已使用的資料流也沒關係
	* 補上所有已定義-已使用的資料流
	* 如下程式，第一步先建立x<0,y<0為真及x<0,y<0為假的測試案例，此為結構化的測試案例開發
	* 第二步，建立x<0為真,y<0為假及x<0為假,y<0為真的測試案例，此為補上已定義-已使用的資料流的測試案例
	* 目前測試對z來說沒有測試到，要測試已定義-已使用的案例，有幾種case
		* 第3行定義，第8行第一次使用，前面測試沒有附蓋到
		* 第3行定義，第16行第一次使用，前面測試沒有附蓋到
 ```C++
int x = 0;
int y = 0;
int z = 0;
void foo(int) {};

if (x < 0)
{
	foo(z);
}
else
{
	Statment1;
}

if (y < 0)
{
	foo(z);
}
else
{
	Statment2;
}
```
<!--stackedit_data:
eyJoaXN0b3J5IjpbODg2MzU2NTcwLDE4NDE4OTA1MzMsMjAwMT
cyMDE5NCwzNzAyMDY0MzQsNjM1NDEyOTI3LC0xNDg3NTkzODY2
LDEyNzI1MjUxNSwtMjA4NTA5ODczOSwtMTE3NzIxODMwOSw3Mz
U4NzY2MDYsMTAzNTUzMjM0MCwtMTAxODU0ODk3NiwtMTMxMjY5
ODIyLC0xMTkwNjE0NTA1XX0=
-->