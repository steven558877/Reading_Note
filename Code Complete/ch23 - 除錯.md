# 除錯
### 除錯時的收穫
* 理解程式
* 明確知道你犯了那些錯誤
* 從程式碼閱讀者的角度去分析程式碼品質
* 審視自己解決問題的方法
* 審視自己解決缺陷的方法

### 低效率的除錯方式
* 僅憑猜測去找錯誤
	* 像是用一堆 printf 去看哪裡發生錯誤
* 不去理解問題發生的原因
* 用最唾手可得的方式修正錯誤
	* 像是我之前對 SNMP 多 sleep 60 秒的方法...
### 迷信式除錯
* 指的是一直將發生錯誤的原因歸咎於其他東西，而非自己的問題。
* 就算問題一開始看起來不像是你的問題，最好還是假設是你的問題，這樣有助於幫助自己集中精神去找出問題。這樣可以避免一開始宣稱是別人的問題，但後來發現其實是自己產生的問題的尷尬場面

## 尋找缺陷
### 科學家除錯的方法
1. 透過可重複的測試收集資料
2. 根據相關資料的統計建構一個假設
3. 設計實驗來證明或反證這個假設
4. 去證明或反證這個假設
5. 根據需求重複進行上述方法

#### 尋找錯誤的有效方法
1. 將錯誤的狀態穩定下來
2. 確定錯誤的來源
	a. 收集產生錯誤的資料
	b. 分析收集的資料，並建構對這個錯誤的假設
	c. 確定怎麼去證實或推翻這個假設，可以對程式進行測試或檢查程式碼
	d. 按照 2\(c\) 所確定的方法對假設做出結論
3. 修正錯誤
4. 測試修正的地方
5. 尋找是否還有類似的錯誤

#### 把錯誤穩定下來
* 如果沒辦法重現錯誤，通常會是初始化錯誤，或是懸空指標的問題
* 如果求和的結果時對時錯，可能是參與計算的變數沒有初始化
* 找出測試案例能將錯誤產生出來，包括縮小測試範圍，讓他變成簡單的形式。你就可以在可控的範圍下去測試。
* 假設在一定的因素下錯誤會發生，那就每次去除一部分的因素，看錯誤是否會發生，進而一步一步縮小範圍去找出錯誤
#### 確定錯誤原因
* 
<!--stackedit_data:
eyJoaXN0b3J5IjpbMTg3MzgwNjYwOSwtMTkxODY4Mjc2MSwxOT
I3MDgyMzg1LC0xNTQxNDY3NzY1LC0yNTQyNzkyMjksMTk3MzUw
NTEwNl19
-->